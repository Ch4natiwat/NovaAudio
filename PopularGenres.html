<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
        crossorigin="anonymous"
    >
    <title>Nova Audio - Popular Genres</title>
    <link rel="shortcut icon" href="./images/Supreme_logo.png">
</head>
    <body>
        <div class="app_container">
        <div id="app">
            <div name="site-header" class="" style="background-color: black">
                <!-- Header -->
                <br>
                <div class="row row-cols-auto" style="margin: 0em;">
                    <div class="col-1" style="padding-left: 2em;">
                        <img src="./images/Logo.PNG" width=100 height=100>
                    </div>
                    <div class="col-1">
                        <h1 style="color: white">Nova<br>Audio</h1>
                    </div>
                    <div class="col" style="padding-left: 53em; padding-top: 0.8em;">
                        <form class="d-flex">
                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        </form>
                    </div>
                    <div class="col-1" style="padding-top: 0.5em; margin-right: 2em;" v-on:click="ShowMyCart">
                        <button style="border-width: 0; background-color: black;">
                            <img src="./images/User_and_cart.PNG" width=100 height=45>
                            <p style="color: white; text-align: center">{{countitem}} ITEMS</p>
                        </button>
                    </div>
                </div>
                <br>
            </div>

            <div name="site-nav" class="" style="background-color: #1A1A1A;">
                <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: black; border: solid #808080 0.1em; padding: 0em;">
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav nav-fill w-100">
                            <li class="nav-item" style="outline: solid #808080 0.1em;">
                            <a class="nav-link" href="#" style="font-size: 1em;">Home</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#" style="font-size: 1em;" v-on:click="ShowCatePage">Popular Genres</a>
                            </li>
                            <li class="nav-item" style="outline: solid #808080 0.1em;">
                            <a class="nav-link" href="#" style="font-size: 1em;">Popular Audio</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#" style="font-size: 1em;">Subscription</a>
                            </li>
                            <li class="nav-item" style="outline: solid #808080 0.1em;">
                            <a class="nav-link" href="#" style="font-size: 1em;">Contact Us</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#" style="font-size: 1em;">Help</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>

            <div name="site-adv" class="" style="background-color: #1A1A1A;" v-if="product_page">
                <div style="padding: 2em">
                    <div class="row" style="margin: 0em">
                        <div class="col-7">
                            <strong style="color: white; font-size: 2.5em; line-height: 1em; font-family: Helvetica;">
                                Popular Genres
                            </strong>
                            <p style="color: white; font-size: 1.5em;">
                                <br>
                                Lorem ipsum dolor sit amet, per ut dicta constituto, tantas mucius ius ex. Te 
                                graeco mnesarchum vel, iusto dicunt mei ex. Sea et malorum ornatus repre
                                hendunt. Est facilis delicata at. Ut per appellantur consequuntur. Deseruisse 
                                mnesarchum intellegebat cu has. 
                                <br><br>
                            </p>
                            <p style="color: #808080; font-size: 1.5em;">
                                Subscribe for more free downloadable audio 
                                <br><br>
                            </p>
                            <button type="button" class="btn" style="border-radius: 0.5em; background-color: white; font-weight: bold; width: 6em; font-size: 1.5em; font-family: Helvetica;">  Join  </button>
                        </div>
                        <div class="col" style="padding: 1em; padding-left: 1.5em;">
                            <img src="./images/Listening2.PNG" width=550 height=400 style="border-radius: 1em;">
                        </div>
                    </div>
                </div>
            </div>

            <div name="site-body" class="" style="background-color: #1A1A1A;" v-if="product_page">
                <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #1A1A1A; padding: 0em;">
                    <div class="container-fluid">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNavDropdown" style="padding-left: 10em; padding-right: 10em;">
                        <ul class="navbar-nav nav-fill w-100" style="font-size: 1.5em;">
                            <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Emotional</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#">Beats</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#">Acoustic</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#">Soft Ambient</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link" href="#">Action</a>
                            </li>
                            <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-expanded="false">
                                More
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">Pops</a></li>
                                <li><a class="dropdown-item" href="#">Rhythm and blues</a></li>
                                <li><a class="dropdown-item" href="#">Country</a></li>
                                <li><a class="dropdown-item" href="#">Middle Eastern</a></li>
                                <li><a class="dropdown-item" href="#">Jazz</a></li>
                                <li><a class="dropdown-item" href="#">Classical</a></li>
                                <li><a class="dropdown-item" href="#">Electronic</a></li>
                            </ul>
                            </li>
                        </ul>
                        </div>
                    </div>
                </nav>
                <div style="padding-left: 4em; padding-right: 4em; padding-top: 1.5em; padding-bottom: 3em;">
                    <div style="padding: 2em; padding-bottom: 1em; background-color: black; border-radius: 1em; padding-right: 0em;">
                        <Product v-on:add-item="addItem" v-for="product in products" :product="product" :key="product.id" />
                    </div>
                </div>
            </div>

            <div name="site-cart" style="background-color: #1A1A1A;" v-if="cart_page">
                <div style="padding: 3em;">
                    <strong style="color: white; font-size: 2.5em; line-height: 1em; font-family: Helvetica;">
                        Cart
                    </strong>
                    <div style="padding: 1em">
                        <div style="padding: 2em; padding-bottom: 1em; background-color: black; border-radius: 1em; padding-right: 0em; margin-top: 3em;">
                            <CartItem v-for="item in cart" :item="item" :key="item.id" v-on:remove-item="removeItem" />
                        </div>
                    </div>
                    <div class="row" style="margin: 0em; color: white; font-size: 1.5em; margin-left: 28.5em; margin-top: 0.5em">
                        <div class="col">
                            <p>Current Plan: none</p>
                        </div>
                        <div class="col">
                        <p>Total: {{totalprice}} THB</p>
                        </div>
                    </div>
                    <br><br><br><br>
                    <div class="row" style="margin: 0em;">
                        <div class="col">
                            <button type="button" class="btn" style="border-radius: 0.5em; background-color: black; outline: solid white 0.05em; font-weight: bold; width: 12em; font-size: 1.5em; font-family: Helvetica; color: white;" v-on:click="ShowCatePage">Continue Exploring</button>
                        </div>
                        <div class="col">
                            <button type="button" class="btn" style="border-radius: 0.5em; background-color: white; font-weight: bold; width: 8em; font-size: 1.5em; font-family: Helvetica; margin-left: 20em;">Check-out</button>
                        </div>
                    </div>
                    <br><br>
                </div>
            </div>
        </div>
        </div>

        <div name="site-footer" class="" style="background-color: black; outline: solid #808080 0.1em;">
            <!-- footer -->
            <div class="row" style="padding: 2em; padding-bottom: 0.5em; color: white; margin: 0em;">
                <div class="col-2">
                    <p>Music<br>
                    Ambient Sound<br>
                    For Artist<br>
                    In-Store Music<br></p>
                </div>
                <div class="col-2">
                    <p>Pricing<br>
                    Referral<br>
                    Blog<br>
                    Help<br></p>
                </div>
                <div class="col-2" style="padding-left: 49em; padding-top: 3.7em;">
                    <img src="./images/Social.PNG" width="200em" height="auto">
                </div>
            </div>
        </div>

        <link rel="stylesheet" 
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" 
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
            crossorigin="anonymous">
        </div>
    </body>

    <template id="product-template">
        <div class="row" style="margin: 0em;">
            <div class="col-1">
                <img :src="product.url" width=150 height=150>
            </div>
            <div class="col-4">
                <p style="color: white; font-size: 2em; margin-left: 2em; margin-top: 0.8em; margin-bottom: 0em;">{{product.name}}</p>
                <p style="color: #808080; font-size: 1.5em; margin-left: 2.8em;">{{product.artist}}</p>
            </div>
            <div class="col">
                <img src="./images/Play_button.PNG" width=20 height=30 style="margin-top: 3.6em; margin-left: 3em;">
            </div>
            <div class="col-3" style="padding-top: 4em;">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 50%"aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="col-2">
                <p style="margin-top: 2.2em; color: #808080; font-size: 1.5em; text-align: center;">{{product.price}} THB</p>
            </div>
            <div class="col-1" style="padding-top: 3.3em;">
                <button style="border-width: 0; background-color: black;">
                    <img src="./images/Add_to_cart.PNG" width=30 height=30 @click="addToCart()">
                </button>
            </div>
        </div>
        <br>
    </template>

    <!-- <template id="product-template">
        <div class="col mb-4 d-flex">
            <div class="card">
                <img :src="product.url" class="card-img-top" alt="...">
                <div class="card-body">
                <h5 class="card-title">{{product.name}}</h5>
                <p class="card-text">
                    ${{product.price}}
                    <br/>
                    <small>
                    {{product.shortdesc}}
                    </small>
                </p>
                <button @click="addToCart()" class="btn btn-primary btn-block">Add</button>
                </div>
            </div>
        </div>
    </template> -->

    <!-- <template id="cart-template">
        <div class="row" style="margin: 0em;">
            <div class="col-1">
                <img :src="item.url" width=150 height=150>
            </div>
            <div class="col-4">
                <p style="color: white; font-size: 2em; margin-left: 2em; margin-top: 0.8em; margin-bottom: 0em;">{{item.name}}</p>
                <p style="color: #808080; font-size: 1.5em; margin-left: 2.8em;">{{item.artist}}</p>
            </div>
            <div class="col">
                <img src="images/Play_button.PNG" width=20 height=30 style="margin-top: 3.6em; margin-left: 3em;">
            </div>
            <div class="col-3" style="padding-top: 4em;">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="col-2">
                <p style="margin-top: 2.2em; color: #808080; font-size: 1.5em; text-align: center;">{{item.price}}</p>
            </div>
            <div class="col-1" style="padding-top: 3.3em;">
                <img src="./images/Add_to_cart.PNG" width=30 height=30>
            </div>
        </div>
    </template> -->

    <template id="cartitem-template">
        <div class="row" style="margin-bottom: 20px;">
            <div class="col-1">
                <img :src="item.url" width=150 height=150>
            </div>
            <div class="col-4">
                <p style="color: white; font-size: 2em; margin-left: 2em; margin-top: 0.8em; margin-bottom: 0em;">{{item.name}}</p>
                <p style="color: #808080; font-size: 1.5em; margin-left: 2.8em;">{{item.artist}}</p>
            </div>
            <div class="col">
                <img src="images/Play_button.PNG" width=20 height=30 style="margin-top: 3.6em; margin-left: 3em;">
            </div>
            <div class="col-3" style="padding-top: 4em;">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="col-2">
                <p style="margin-top: 2.2em; color: #808080; font-size: 1.5em; text-align: center;">{{item.price}} THB</p>
            </div>
            <div class="col-1" style="padding-top: 3.3em;">
                <button style="border-width: 0; background-color: black;">
                    <h2 style="color: white" @click="removeFromCart()">X</h2>
                </button>
            </div>
        </div>
        <!-- <div>{{item.name}} - {{item.count}}</div> -->
    </template>

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- <script src="https://unpkg.com/vuex@4.0.0/dist/vuex.global.js"></script> -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let app = Vue.createApp({

        // render: function(createElement) {
        //     return createElement('div', {}, this.cart)
        // },

        data: function() {
            return {
                
                product_page: true,
                cart_page: false,

                products: [{
                    id: 1,
                    name: "Summer",
                    artist: "Jennifer",
                    price: 150,
                    url: "./images/Summer.PNG"
                }, {
                    id: 2,
                    name: "Song Name 2",
                    artist: "Artist Name 2",
                    price: 100,
                    url: "./images/Neon.PNG"
                }, {
                    id: 3,
                    name: "Song Name 3",
                    artist: "Artist Name 3",
                    price: 100,
                    url: "./images/Silhouette.PNG"
                }, {
                    id: 4,
                    name: "Song Name 4",
                    artist: "Artist Name 4",
                    price: 0,
                    url: "./images/Cat.PNG"
                }, {
                    id: 5,
                    name: "Song Name 5",
                    artist: "Artist Name 5",
                    price: 0,
                    url: "./images/Robot.PNG"
                }, {
                    id: 6,
                    name: "Song Name 6",
                    artist: "Artist Name 6",
                    price: 150,
                    url: "./images/Horizon.PNG"
                }],

                cart: []
            }
        },

        mounted: function() {

        },

        methods: {
            addItem: function(id) {
                console.log(this.products)
                console.log(id)
                
                item = this.cart.find(product => product.id == id)

                if (item) {
                    item.count += 0
                } else {
                    item = this.products.find(product => product.id == id)
                    this.cart.push({
                        id: item.id,
                        name: item.name,
                        artist: item.artist,
                        price: item.price,
                        url: item.url,
                        count: 1
                    })
                }
                console.log(this.cart)
            },

            removeItem: function(id) {
                item = this.cart.find(product => product.id == id)

                if (item) {
                    item.count -= 1
                    const i = this.cart.indexOf(item)
                    if (i > -1) {
                        this.cart.splice(i, 1)
                    }
                } 
                console.log(this.cart)            },

            ShowMyCart: function() {
                this.cart_page = true
                this.product_page = false
            },

            ShowCatePage: function() {
                this.product_page = true
                this.cart_page = false
            },
        },

        computed: {
            countitem: function() {
                var totali = 0
                for (i in this.cart) {
                    totali += this.cart[i].count
                }
                return totali
            },

            totalprice: function() {
                var totalp = 0
                for (i in this.cart) {
                    totalp += this.cart[i].price * this.cart[i].count
                }
                return totalp
            }
        }

        })

        app.component('Product', {
        data: function() {
            return {}
        },
        props: ['product'],
        template: "#product-template",

        methods: {
            addToCart: function() {
                this.$emit("add-item", this.product.id)
            }

        },
        });

        app.component('Cartitem', {
            data: function() {
            return {}
        },
        props: ['item'],
        template: '#cartitem-template',
        methods: {
            removeFromCart: function() {
                this.$emit("remove-item", this.item.id)
            }
        }
        });

        app.mount("#app")
    </script>
</html>
